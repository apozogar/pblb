<p-toast></p-toast>

<div class="card">
    <h2>Próximos Eventos</h2>
    <p>Explora los próximos eventos y apúntate.</p>

    <div *ngIf="loading" class="flex justify-center items-center h-64">
        <p-progressSpinner></p-progressSpinner>
    </div>

    <div *ngIf="!loading && eventos.length === 0" class="text-center p-4">
        <p>No hay eventos programados por el momento.</p>
    </div>

    <div *ngIf="!loading" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
        <p-card *ngFor="let evento of eventos" [header]="evento.nombreEvento">
            <div class="flex flex-col gap-2 mb-4">
                <div class="flex items-center gap-2">
                    <i class="pi pi-calendar"></i>
                    <span>{{ evento.fechaEvento | date:'dd/MM/yyyy' }}</span>
                </div>
                <div *ngIf="evento.ubicacion" class="flex items-center gap-2">
                    <i class="pi pi-map-marker"></i>
                    <span>{{ evento.ubicacion }}</span>
                </div>
            </div>
            <ng-template pTemplate="footer">
                <ng-container *ngIf="!evento.isCurrentUserInscrito; else yaInscrito">
                    <p-button label="Inscribir" icon="pi pi-check"
                              (click)="inscribir(evento)"></p-button>
                </ng-container>
                <ng-template #yaInscrito>
                    <p-button label="Quitar inscripción" icon="pi pi-times"
                              styleClass="p-button-danger p-button-outlined"
                              (click)="anularInscripcion(evento)"></p-button>
                </ng-template>
            </ng-template>
        </p-card>
    </div>
</div>
